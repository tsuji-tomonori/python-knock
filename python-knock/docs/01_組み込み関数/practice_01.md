---
sidebar_position: 1
---

# 問題1: 工程能力指数 (Cpk) の計算

## 背景

工程能力指数 (Process Capability Index, **Cpk**) は製造工程の能力を評価するために使用される指標の一つです。Cpk は工程が規格範囲にどの程度適合しているかを示し、工程の品質を判断するのに役立ちます。Cpk の計算には以下の情報が必要です。

- **規格上限 (Upper Specification Limit, USL)**
- **規格下限 (Lower Specification Limit, LSL)**
- **工程の平均値 (mean)**
- **標準偏差 (standard deviation)**

Cpk は次の式で計算されます。

この式で、Cpk の値が大きいほど、工程は規格範囲内に収まりやすく、品質が高いことを示します。一般的に、Cpk が 1.33 以上であれば工程が安定しているとみなされます。

## 問題

以下の情報を入力として、Cpk を計算する Python プログラムを作成してください。

## 入力フォーマット

以下の `calc_cpk` 関数を実装してください。

```python
from typing import NamedTuple


class Param(NamedTuple):
    usl: float # 規格上限値
    lsl: float # 規格下限値
    data: list[float] # 工程から得られたサンプルデータのリスト データは1件以上


def calc_cpk(param: Param) -> float:
    """
    工程能力指数を計算する関数.

    Args:
        param (Param): 計算に必要な値

    Returns:
        list[int]: 工程能力指数(cpk) 小数点第3位で四捨五入
    """
    ...
```

## 出力フォーマット

- 計算した工程能力指数 (**Cpk**) を小数点以下 2 桁で出力してください。
  - 例: `工程能力指数 (Cpk): 0.90`

## サンプル

**入力例**:

```python
USL = 10.0
LSL = 2.0
data = [3.5, 4.0, 5.5, 6.0, 4.5, 5.0, 6.5, 7.0, 5.5, 4.0]
```

**出力例**:

```
工程能力指数 (Cpk): 0.90
```

## サンプルの解説

- **平均値の計算**: サンプルデータの平均値は `(3.5 + 4.0 + 5.5 + 6.0 + 4.5 + 5.0 + 6.5 + 7.0 + 5.5 + 4.0) / 10 = 5.05`
- **標準偏差の計算**:
  1. 各データ点から平均値を引き、その差を二乗します。
     - 例: `(3.5 - 5.05)^2 = 2.4025`, `(4.0 - 5.05)^2 = 1.1025`, など。
  2. その二乗の合計をデータの個数で割ります（これが分散です）。
  3. 分散の平方根を取ることで標準偏差が求まります。
- **Cpk の計算**:
  - `USL - mean = 10.0 - 5.05 = 4.95`
  - `mean - LSL = 5.05 - 2.0 = 3.05`
  - 標準偏差を 3 倍した値で各差を割り、その小さい方を取ります。
  - 最終的に `Cpk = 0.90` となります。
